<!DOCTYPE html>
<html lang="en">
<head>
    <title>Magento 2 theme generation</title>
   
</head>
<body>
    <h1>Less compilation</h1>

    <div id="base"></div>
    <!-- <button type="button" id="getvalue">Get Value</button> -->
    <div id="results"></div>
    <input type="button" id="create_file" value="create file"/>

    <script>window.$ = window.jQuery = require('./js/jquery-3.3.1.min.js');</script>
    <script>
       
       var variables = [];
            $.getJSON('./variables/variables.json', function(data) {
                $.each(data.base_variables, function(i, f) {
                var var_data = '<div class="color_input"><span>'+f.name+'</span><input type="text" name='+f.value+' value=""></div>'
                    $(var_data).appendTo("#base");
            });

        });
       
        const fs = require("fs");

        const {dialog} = require("electron").remote;
        document.getElementById("create_file").addEventListener("click", () => {
            let content='';      
            jQuery.expr[':'].hasValue = function(el) {
                    return el.value != "";
            };       
            var x = $("#base :input:hasValue").serializeArray();
                $.each(x, function(i, field){
                    content += field.name + ':' +  field.value + ';'+'\n';      
                    
            });
            
         
                
            dialog.showSaveDialog((filename) => {
                if(filename == undefined){
                    console.log("clicked the button, but didint create the file")
                    return;
                }
                fs.writeFile(filename, content, (err) => {
                    if(err){
                        console.log('error occured while creating file' + err.message);
                    }
                    alert("file created successfully");
                })
            });

        },false)

                
    </script>
    <script src="nn.js"></script>
    
</body>
</html>